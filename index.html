<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Trading Performance Dashboard</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        :root {
            --primary: #2c3e50;
            --secondary: #34495e;
            --accent: #3498db;
            --success: #2ecc71;
            --danger: #e74c3c;
            --warning: #f39c12;
            --light: #ecf0f1;
            --dark: #2c3e50;
            --text: #333;
            --card-bg: #fff;
            --bg-color: #f5f7fa;
        }

        .dark-mode {
            --primary: #1a2530;
            --secondary: #2c3e50;
            --accent: #2980b9;
            --success: #27ae60;
            --danger: #c0392b;
            --warning: #d35400;
            --light: #34495e;
            --dark: #ecf0f1;
            --text: #ecf0f1;
            --card-bg: #2c3e50;
            --bg-color: #1a2530;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            transition: background-color 0.3s, color 0.3s;
        }

        body {
            font-family: 'Poppins', sans-serif;
            background-color: var(--bg-color);
            color: var(--text);
            line-height: 1.6;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 20px 0;
            margin-bottom: 30px;
            border-bottom: 1px solid var(--secondary);
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .logo i {
            font-size: 2rem;
            color: var(--accent);
        }

        .logo h1 {
            font-weight: 600;
            font-size: 1.8rem;
        }

        .theme-switch {
            background: var(--secondary);
            border-radius: 50px;
            padding: 5px;
            cursor: pointer;
            display: flex;
            align-items: center;
        }

        .theme-switch i {
            font-size: 1.2rem;
            padding: 5px;
            background: var(--accent);
            border-radius: 50%;
            color: white;
        }

        .tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 30px;
        }

        .tab {
            padding: 12px 25px;
            background: var(--secondary);
            color: var(--text);
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 500;
            transition: all 0.3s;
        }

        .tab.active {
            background: var(--accent);
            color: white;
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
            animation: fadeIn 0.5s;
        }

        .card {
            background: var(--card-bg);
            border-radius: 12px;
            padding: 25px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            margin-bottom: 30px;
        }

        .card-title {
            font-size: 1.4rem;
            margin-bottom: 20px;
            color: var(--accent);
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .card-title i {
            font-size: 1.2rem;
        }

        .form-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 500;
        }

        .form-control {
            width: 100%;
            padding: 12px 15px;
            border: 1px solid #ddd;
            border-radius: 8px;
            background: var(--card-bg);
            color: var(--text);
            font-size: 1rem;
        }

        .form-control:read-only {
            background-color: #f5f5f5;
        }

        .dark-mode .form-control:read-only {
            background-color: #3b4a5a;
        }

        .btn {
            padding: 12px 25px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1rem;
            font-weight: 500;
            transition: all 0.3s;
        }

        .btn-primary {
            background: var(--accent);
            color: white;
        }

        .btn-primary:hover {
            background: #2980b9;
        }

        .btn-success {
            background: var(--success);
            color: white;
        }

        .btn-success:hover {
            background: #27ae60;
        }

        .chart-container {
            position: relative;
            height: 400px;
            margin-bottom: 30px;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .stat-card {
            background: var(--card-bg);
            border-radius: 12px;
            padding: 20px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            text-align: center;
        }

        .stat-card i {
            font-size: 2rem;
            margin-bottom: 15px;
            color: var(--accent);
        }

        .stat-value {
            font-size: 1.8rem;
            font-weight: 700;
            margin-bottom: 5px;
        }

        .stat-label {
            color: #777;
            font-size: 0.9rem;
        }

        .dark-mode .stat-label {
            color: #ccc;
        }

        .github-config {
            max-width: 600px;
            margin: 0 auto;
        }

        footer {
            text-align: center;
            margin-top: 50px;
            padding: 20px;
            border-top: 1px solid var(--secondary);
            font-size: 0.9rem;
            color: #777;
        }

        .dark-mode footer {
            color: #ccc;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        @media (max-width: 768px) {
            .form-grid {
                grid-template-columns: 1fr;
            }
            
            .stats-grid {
                grid-template-columns: 1fr;
            }
            
            .chart-container {
                height: 300px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <div class="logo">
                <i class="fas fa-chart-line"></i>
                <h1>Trading Dashboard</h1>
            </div>
            <div class="theme-switch" onclick="toggleDarkMode()">
                <i class="fas fa-moon"></i>
            </div>
        </header>

        <div class="tabs">
            <button class="tab active" onclick="switchTab('dashboard')"><i class="fas fa-home"></i> Dashboard</button>
            <button class="tab" onclick="switchTab('github')"><i class="fab fa-github"></i> GitHub Config</button>
        </div>

        <div id="dashboard-tab" class="tab-content active">
            <div class="card">
                <h2 class="card-title"><i class="fas fa-pencil-alt"></i> Input Data Trading</h2>
                <form id="trading-form">
                    <div class="form-grid">
                        <div class="form-group">
                            <label for="day">Day (WIB)</label>
                            <input type="text" id="day" class="form-control" readonly>
                        </div>
                        <div class="form-group">
                            <label for="profit">Profit</label>
                            <input type="number" id="profit" class="form-control" placeholder="Masukkan profit">
                        </div>
                        <div class="form-group">
                            <label for="loss">Loss</label>
                            <input type="number" id="loss" class="form-control" placeholder="Masukkan loss">
                        </div>
                        <div class="form-group">
                            <label for="daily-target">Target Harian</label>
                            <input type="number" id="daily-target" class="form-control" readonly>
                        </div>
                        <div class="form-group">
                            <label for="actual-target">Actual Target</label>
                            <input type="number" id="actual-target" class="form-control" placeholder="Masukkan actual target">
                        </div>
                        <div class="form-group">
                            <label for="monthly-target">Target Perbulan</label>
                            <input type="number" id="monthly-target" class="form-control" placeholder="Masukkan target bulanan">
                        </div>
                        <div class="form-group">
                            <label for="initial-capital">Modal Awal</label>
                            <input type="number" id="initial-capital" class="form-control" placeholder="Masukkan modal awal">
                        </div>
                    </div>
                    <button type="submit" class="btn btn-primary"><i class="fas fa-save"></i> Simpan Data</button>
                </form>
            </div>

            <div class="stats-grid">
                <div class="stat-card">
                    <i class="fas fa-wallet"></i>
                    <div class="stat-value" id="total-profit">Rp 0</div>
                    <div class="stat-label">Total Profit</div>
                </div>
                <div class="stat-card">
                    <i class="fas fa-money-bill-wave"></i>
                    <div class="stat-value" id="total-loss">Rp 0</div>
                    <div class="stat-label">Total Loss</div>
                </div>
                <div class="stat-card">
                    <i class="fas fa-target"></i>
                    <div class="stat-value" id="success-rate">0%</div>
                    <div class="stat-label">Success Rate</div>
                </div>
                <div class="stat-card">
                    <i class="fas fa-chart-bar"></i>
                    <div class="stat-value" id="avg-daily">Rp 0</div>
                    <div class="stat-label">Rata-rata Harian</div>
                </div>
            </div>

            <div class="card">
                <h2 class="card-title"><i class="fas fa-chart-area"></i> Profit & Loss Chart</h2>
                <div class="chart-container">
                    <canvas id="profit-loss-chart"></canvas>
                </div>
            </div>

            <div class="card">
                <h2 class="card-title"><i class="fas fa-chart-bar"></i> Target vs Actual</h2>
                <div class="chart-container">
                    <canvas id="target-actual-chart"></canvas>
                </div>
            </div>
        </div>

        <div id="github-tab" class="tab-content">
            <div class="card github-config">
                <h2 class="card-title"><i class="fab fa-github"></i> GitHub Configuration</h2>
                <form id="github-form">
                    <div class="form-group">
                        <label for="repo-owner">Repository Owner</label>
                        <input type="text" id="repo-owner" class="form-control" placeholder="Nama pemilik repo">
                    </div>
                    <div class="form-group">
                        <label for="repo-name">Repository Name</label>
                        <input type="text" id="repo-name" class="form-control" placeholder="Nama repository">
                    </div>
                    <div class="form-group">
                        <label for="access-token">Access Token</label>
                        <input type="password" id="access-token" class="form-control" placeholder="Token akses GitHub">
                    </div>
                    <div class="form-group">
                        <label for="file-path">File Path (optional)</label>
                        <input type="text" id="file-path" class="form-control" placeholder="Path file di repository">
                    </div>
                    <button type="submit" class="btn btn-success"><i class="fas fa-sync-alt"></i> Simpan Konfigurasi</button>
                </form>
            </div>

            <div class="card">
                <h2 class="card-title"><i class="fas fa-info-circle"></i> Informasi</h2>
                <p>Dengan mengkonfigurasi GitHub, data trading akan secara otomatis disinkronisasi ke repository Anda setiap kali disimpan.</p>
                <p>Pastikan access token memiliki izin untuk mengakses repository.</p>
            </div>
        </div>

        <footer>
            <p>© 2023 Trading Performance Dashboard | Dibuat dengan <i class="fas fa-heart" style="color: #e74c3c;"></i></p>
        </footer>
    </div>

    <script>
        // Inisialisasi variabel global
        let tradingData = [];
        let profitLossChart, targetActualChart;
        let githubConfig = {
            repoOwner: '',
            repoName: '',
            accessToken: '',
            filePath: 'trading-data.json'
        };

        // Fungsi untuk inisialisasi aplikasi
        function initApp() {
            updateDateTime();
            setInterval(updateDateTime, 60000); // Update waktu setiap menit
            
            // Load data dari localStorage jika ada
            loadFromLocalStorage();
            
            // Setup event listeners
            document.getElementById('trading-form').addEventListener('submit', saveTradingData);
            document.getElementById('monthly-target').addEventListener('input', updateDailyTarget);
            document.getElementById('github-form').addEventListener('submit', saveGithubConfig);
            
            // Inisialisasi chart
            initCharts();
            
            // Update statistik
            updateStats();
        }

        // Fungsi untuk update tanggal dan waktu
        function updateDateTime() {
            const now = new Date();
            const options = { timeZone: 'Asia/Jakarta', weekday: 'long', year: 'numeric', month: 'long', day: 'numeric', hour: '2-digit', minute: '2-digit' };
            const dateTimeStr = now.toLocaleDateString('id-ID', options) + ' WIB';
            document.getElementById('day').value = dateTimeStr;
        }

        // Fungsi untuk update target harian
        function updateDailyTarget() {
            const monthlyTarget = parseFloat(document.getElementById('monthly-target').value) || 0;
            const dailyTarget = monthlyTarget / 30;
            document.getElementById('daily-target').value = dailyTarget.toFixed(2);
        }

        // Fungsi untuk menyimpan data trading
        function saveTradingData(e) {
            e.preventDefault();
            
            const newData = {
                date: document.getElementById('day').value,
                profit: parseFloat(document.getElementById('profit').value) || 0,
                loss: parseFloat(document.getElementById('loss').value) || 0,
                dailyTarget: parseFloat(document.getElementById('daily-target').value) || 0,
                actualTarget: parseFloat(document.getElementById('actual-target').value) || 0,
                monthlyTarget: parseFloat(document.getElementById('monthly-target').value) || 0,
                initialCapital: parseFloat(document.getElementById('initial-capital').value) || 0,
                timestamp: new Date().getTime()
            };
            
            tradingData.push(newData);
            saveToLocalStorage();
            updateCharts();
            updateStats();
            
            // Reset form
            document.getElementById('profit').value = '';
            document.getElementById('loss').value = '';
            document.getElementById('actual-target').value = '';
            
            // Sinkronisasi ke GitHub jika dikonfigurasi
            if (githubConfig.accessToken) {
                syncToGithub();
            }
            
            alert('Data trading berhasil disimpan!');
        }

        // Fungsi untuk update chart
        function updateCharts() {
            // Data untuk chart Profit & Loss
            const dates = tradingData.map(data => {
                const date = new Date(data.timestamp);
                return date.toLocaleDateString('id-ID', { day: 'numeric', month: 'short' });
            });
            
            const profits = tradingData.map(data => data.profit);
            const losses = tradingData.map(data => data.loss);
            
            profitLossChart.data.labels = dates;
            profitLossChart.data.datasets[0].data = profits;
            profitLossChart.data.datasets[1].data = losses;
            profitLossChart.update();
            
            // Data untuk chart Target vs Actual
            const dailyTargets = tradingData.map(data => data.dailyTarget);
            const actualTargets = tradingData.map(data => data.actualTarget);
            
            targetActualChart.data.labels = dates;
            targetActualChart.data.datasets[0].data = dailyTargets;
            targetActualChart.data.datasets[1].data = actualTargets;
            targetActualChart.update();
        }

        // Fungsi untuk inisialisasi chart
        function initCharts() {
            const ctx1 = document.getElementById('profit-loss-chart').getContext('2d');
            profitLossChart = new Chart(ctx1, {
                type: 'line',
                data: {
                    labels: [],
                    datasets: [
                        {
                            label: 'Profit',
                            data: [],
                            borderColor: '#2ecc71',
                            backgroundColor: 'rgba(46, 204, 113, 0.1)',
                            borderWidth: 2,
                            fill: true,
                            tension: 0.3
                        },
                        {
                            label: 'Loss',
                            data: [],
                            borderColor: '#e74c3c',
                            backgroundColor: 'rgba(231, 76, 60, 0.1)',
                            borderWidth: 2,
                            fill: true,
                            tension: 0.3
                        }
                    ]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        title: {
                            display: true,
                            text: 'Profit dan Loss Harian',
                            font: {
                                size: 16
                            }
                        },
                        tooltip: {
                            mode: 'index',
                            intersect: false
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            title: {
                                display: true,
                                text: 'Amount (Rp)'
                            }
                        }
                    }
                }
            });
            
            const ctx2 = document.getElementById('target-actual-chart').getContext('2d');
            targetActualChart = new Chart(ctx2, {
                type: 'bar',
                data: {
                    labels: [],
                    datasets: [
                        {
                            label: 'Target Harian',
                            data: [],
                            backgroundColor: 'rgba(52, 152, 219, 0.7)',
                            borderColor: 'rgba(52, 152, 219, 1)',
                            borderWidth: 1
                        },
                        {
                            label: 'Actual Target',
                            data: [],
                            backgroundColor: 'rgba(46, 204, 113, 0.7)',
                            borderColor: 'rgba(46, 204, 113, 1)',
                            borderWidth: 1
                        }
                    ]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        title: {
                            display: true,
                            text: 'Target Harian vs Actual',
                            font: {
                                size: 16
                            }
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            title: {
                                display: true,
                                text: 'Amount (Rp)'
                            }
                        }
                    }
                }
            });
        }

        // Fungsi untuk update statistik
        function updateStats() {
            const totalProfit = tradingData.reduce((sum, data) => sum + data.profit, 0);
            const totalLoss = tradingData.reduce((sum, data) => sum + data.loss, 0);
            const successRate = tradingData.length > 0 ? 
                (tradingData.filter(data => data.actualTarget >= data.dailyTarget).length / tradingData.length * 100) : 0;
            const avgDaily = tradingData.length > 0 ? 
                (tradingData.reduce((sum, data) => sum + data.actualTarget, 0) / tradingData.length) : 0;
            
            document.getElementById('total-profit').textContent = `Rp ${totalProfit.toLocaleString('id-ID')}`;
            document.getElementById('total-loss').textContent = `Rp ${totalLoss.toLocaleString('id-ID')}`;
            document.getElementById('success-rate').textContent = `${successRate.toFixed(1)}%`;
            document.getElementById('avg-daily').textContent = `Rp ${avgDaily.toLocaleString('id-ID')}`;
        }

        // Fungsi untuk menyimpan konfigurasi GitHub
        function saveGithubConfig(e) {
            e.preventDefault();
            
            githubConfig = {
                repoOwner: document.getElementById('repo-owner').value,
                repoName: document.getElementById('repo-name').value,
                accessToken: document.getElementById('access-token').value,
                filePath: document.getElementById('file-path').value || 'trading-data.json'
            };
            
            localStorage.setItem('githubConfig', JSON.stringify(githubConfig));
            alert('Konfigurasi GitHub berhasil disimpan!');
        }

        // Fungsi untuk sinkronisasi data ke GitHub
        function syncToGithub() {
            // Simulasi sinkronisasi ke GitHub
            console.log('Menyinkronisasi data ke GitHub...');
            console.log('Config:', githubConfig);
            console.log('Data:', tradingData);
            
            // Dalam implementasi nyata, di sini akan ada kode untuk mengirim data ke GitHub API
            // menggunakan fetch atau XMLHttpRequest
            alert('Data berhasil disinkronisasi ke GitHub!');
        }

        // Fungsi untuk beralih tab
        function switchTab(tabName) {
            document.querySelectorAll('.tab-content').forEach(tab => {
                tab.classList.remove('active');
            });
            
            document.querySelectorAll('.tab').forEach(tab => {
                tab.classList.remove('active');
            });
            
            document.getElementById(`${tabName}-tab`).classList.add('active');
            
            // Menandai tab yang aktif
            const tabs = document.querySelectorAll('.tab');
            const targetTab = Array.from(tabs).find(tab => tab.textContent.includes(tabName === 'dashboard' ? 'Dashboard' : 'GitHub'));
            if (targetTab) targetTab.classList.add('active');
        }

        // Fungsi untuk toggle dark mode
        function toggleDarkMode() {
            document.body.classList.toggle('dark-mode');
            const themeIcon = document.querySelector('.theme-switch i');
            if (document.body.classList.contains('dark-mode')) {
                themeIcon.classList.remove('fa-moon');
                themeIcon.classList.add('fa-sun');
            } else {
                themeIcon.classList.remove('fa-sun');
                themeIcon.classList.add('fa-moon');
            }
        }

        // Fungsi untuk menyimpan data ke localStorage
        function saveToLocalStorage() {
            localStorage.setItem('tradingData', JSON.stringify(tradingData));
        }

        // Fungsi untuk memuat data dari localStorage
        function loadFromLocalStorage() {
            const savedData = localStorage.getItem('tradingData');
            if (savedData) {
                tradingData = JSON.parse(savedData);
                updateCharts();
                updateStats();
            }
            
            const savedGithubConfig = localStorage.getItem('githubConfig');
            if (savedGithubConfig) {
                githubConfig = JSON.parse(savedGithubConfig);
                document.getElementById('repo-owner').value = githubConfig.repoOwner;
                document.getElementById('repo-name').value = githubConfig.repoName;
                document.getElementById('access-token').value = githubConfig.accessToken;
                document.getElementById('file-path').value = githubConfig.filePath;
            }
        }

        // Inisialisasi aplikasi ketika halaman dimuat
        window.addEventListener('DOMContentLoaded', initApp);
    </script>
</body>
</html>
